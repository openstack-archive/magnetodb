[DEFAULT]
oslo_config_args = --config-file $here/magnetodb-api.conf

[composite:main]
use = egg:Paste#urlmap
/v1 = rest_api
/ = dynamodb_api

[pipeline:rest_api]
pipeline = connection_handler faultwrapper rate_limit contextwrapper magnetodb_app

[pipeline:dynamodb_api]
pipeline = connection_handler rate_limit contextwrapper dynamodb_app

[filter:connection_handler]
paste.filter_factory = magnetodb.common.middleware.connection_handler:factory_method

[filter:contextwrapper]
paste.filter_factory = magnetodb.common.middleware.context:ContextMiddleware.factory_method
tenant_id = default_tenant
user_id = default_user
auth_token = ""
is_admin = False

[filter:faultwrapper]
paste.filter_factory = magnetodb.common.middleware.fault:FaultWrapper.factory_method
show_trace =

[filter:rate_limit]
paste.filter_factory = magnetodb.common.middleware.rate_limit:RateLimitMiddleware.factory_method
rps_per_tenant = 0

[app:magnetodb_app]
paste.app_factory = magnetodb.api.openstack.v1.app_factory:MagnetoDBApplication.factory_method

[app:dynamodb_app]
paste.app_factory = magnetodb.api.amz.dynamodb.app_factory:DynamoDBApiApplication.factory_method
